language: java
jdk: oraclejdk8
install: true
before_script:
  - chmod +x ./gradlew
script:
  - "./gradlew build --parallel -s"
cache:
  directories:
    - "$HOME/.gradle/caches/"
    - "$HOME/.gradle/wrapper/"
before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
deploy:
  provider: bintray
  user: fangzhengjin
  key:
    secure: f80BTRxh+7v2ifxrISEeYkQQSw8ViGPnSAOy5s1VTjNplIhXNfdSLN0BoY852hsJ4daHWfpPPsmzRhv03hNgLZKfzwDNXJN8KQ3qfb6z8axUu5fA1BWDgoINAdElB6upNqeElDGs5wRy5oN/SxbQ0SB9i+UjK//ba3P+2bjL+NAv5rHZvGpoX48d5gVkeWrktKVjtkaMdn4efDyjye0iMjHX7g8baYqUafHOGSx+kD+IKHg/EbUqHy+HoeOjtwBl0ynt2uiFCI8nJcpHDEdZak6mAlw/z5juCT7mDnGBwocdkBqdpYx0ZJ05TaEV6H7+ZXm2Ev4ChvJTlFwLZPyBtb9pNO79+W4Kb5hyhtg7hC13CaZQRRkel0b9TZSPZnWg8J75FgjxW86hK8qelK5FOdYJzS+oETKHsouA1D1gqr/ljyodOVgg7/q2seH3EYh9nOcRhpnOHwUyhGhQ1tMS2vg4OjrJnX3wlxqu3RCkM0GrSH7JTjgNhqiU/3WDUeJb5dtvWQ4U4bYiOE/ZXyuKuSbwyGneFMA9vhueW+L5xbA0g1ipKa50h5mxILBI45SEz0ktTPPKvSNtwPCLoCmUqXfdJnrbi3E+r2jrzj5YXfyIJpxfcJt+8UjKtPQQlW+TenL3KQ5fEtyMEuMPr8ptmfaTVsrZtHEgYHRuf4sU75g=
  skip_cleanup: true
  file: build/descriptor.json
  on:
    tags: true
    jdk: oraclejdk8
    branch: master
